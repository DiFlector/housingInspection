**Документ по приложению "Жилищная инспекция"**

**1. Функции приложения**

Приложение "Жилищная инспекция" предназначено для подачи и отслеживания обращений граждан, связанных с перепланировками жилых помещений, а также для автоматизации работы сотрудников жилищной инспекции.

**1.1. Роли пользователей:**

*   **Гражданин:**
    *   Регистрация и авторизация в приложении.
    *   Подача обращения о перепланировке:
        *   Выбор категории перепланировки (объединение комнат, перенос санузла и т.д.).
        *   Заполнение формы обращения (адрес, описание проблемы).
        *   Прикрепление файлов (фото, схемы, документы).
    *   Просмотр истории своих обращений:
        *   Фильтрация обращений по статусу.
        *   Сортировка обращений.
    *   Просмотр детальной информации об обращении:
        *   Статус обращения.
        *   Категория обращения.
        *   Описание.
        *   Прикрепленные файлы (со *скачиванием*).
        *   Дата создания и обновления.
    *   Взаимодействие через чат (планируется).
    *    Просмотр справочной информации (планируется).

*   **Инспектор:**
    *   Авторизация в приложении.
    *   Просмотр списка всех обращений:
        *   Фильтрация обращений по статусу и категории.
        *   Сортировка обращений.
    *   Просмотр детальной информации об обращении (аналогично гражданину).
    *   Изменение статуса обращения.
    *   Удаление обращения
    *   Управление пользователями (просмотр списка, создание, редактирование, удаление/деактивация).
    *   Управление категориями обращений (просмотр списка, создание, редактирование, удаление).
    *   Управление статусами обращений (просмотр списка, создание, редактирование, удаление).
    *   Взаимодействие с заявителями через чат (планируется).

**1.2.  Планируемые функции (в порядке приоритета):**

1.  **Чат:** Интеграция чата для общения между гражданами и "инспектором" (в роли инспектора планируется использовать ИИ).  Чат будет привязан к конкретному обращению.  Возможность отправки текстовых сообщений и файлов.
2.  **Уведомления:**  Уведомления пользователей (внутри приложения) об изменении статуса обращения и о новых сообщениях в чате.
3.  **Пошаговый мастер подачи обращения:**  Более удобный и интуитивно понятный интерфейс для подачи обращения, разбитый на несколько шагов.
4.  **База знаний:**  Раздел приложения с справочной информацией о законодательстве, требованиях к перепланировкам, примерами и шаблонами документов.
5.  **Адаптивный дизайн:**  Оптимизация интерфейса приложения для корректного отображения на устройствах с разными размерами экрана.

**2. Используемые технологии и библиотеки**

**2.1. Frontend (мобильное приложение):**

*   **Язык программирования:** Dart
*   **Фреймворк:** Flutter (кроссплатформенная разработка для Android и iOS)
*   **Управление состоянием:** Provider
*   **Взаимодействие с сервером:** http
*   **Хранение токена:** shared_preferences
*   **Работа с JWT:** jwt_decoder
*   **Загрузка файлов:** file_picker, image_picker
*   **Скачивание файлов:** url_launcher
*   **Другие:** path, path_provider

**2.2. Backend (серверная часть):**

*   **Язык программирования:** Python
*   **Фреймворк:** FastAPI
*   **База данных:** PostgreSQL
*   **ORM:** SQLAlchemy
*   **Аутентификация:** JWT (JSON Web Token)
    *   `python-jose[cryptography]`:  Для работы с JWT.
    *   `passlib`:  Для хеширования паролей (bcrypt).
*   **Работа с переменными окружения:** python-dotenv
*   **Взаимодействие с Yandex Cloud Object Storage:** boto3
*   **Валидация данных:** Pydantic
*   **Сервер:** Uvicorn (ASGI-сервер)
*   **Формирование запросов:** python-multipart
* **Другие** uuid

**2.3. Инфраструктура:**

*   **Сервер:** Ubuntu Server
*   **Контейнеризация:** Docker, Docker Compose
*   **Облачное хранилище:** Yandex Cloud Object Storage

**2.4 Схема базы данных**
* users
  * id
  * username
  * password
  * email
  * full_name
  * role
  * is_active
  * created_at
* appeal_statuses
  *  id
  * name
* appeal_categories
    * id
    * name
* appeals
  * id
  * user_id
  * category_id
  * status_id
  * address
  * description
  * created_at
  * updated_at
  * file_paths
  * file_size
  * file_type

**2.4. Техноческое задание:**

* Базовый функционал 
  - Подача обращений о перепланировках.  
  - Отслеживание статуса заявок.  
  - Получение справочной информации о законодательстве.  
  - Коммуникация с сотрудниками инспекции.  

* Целевая аудитория
  - Граждане, планирующие перепланировку.  
  - Сотрудники Жилищной инспекции.  

-  Пользовательский интерфейс (для граждан):  
   - Регистрация/авторизация:
    - Ролевой доступ (гражданин, сотрудник).  
   - Подача обращения:  
     - Выбор типа перепланировки (объединение комнат, перенос санузла и т.д.).  
     - Заполнение формы: описание работ, прикрепление документов (фото, схемы, PDF).  
     - Интеграция с облачными хранилищами для загрузки файлов.  
     - Проверка корректности заполнения полей перед отправкой.  
 
     - История обращений с фильтрами (новые, в работе, завершенные).  
     - Уведомления об изменении статуса.  
     - Возможность дополнять обращение новыми документами/комментариями. 
 
* База знаний
  - Статьи о законодательных требованиях к перепланировкам.  
  - Примеры одобренных проектов и типовые нарушения.  
  - Шаблоны технических заключений.  

* Административный интерфейс  
  - Личный кабинет админа:  
    - Просмотр и сортировка обращений по категориям/статусам.  
    - Изменение статуса обращения ("принято", "требует уточнений", "отклонено", "одобрено").  
    - Добавление комментариев и запросов на уточнение данных.  

    - Проверка данных по адресу (например, через ГИС ЖКХ).  
    - Экспорт данных в Excel/PDF для отчетности.  

* Чат-модуль
  - Общение между заявителем и сотрудником инспекции.  
  - Прикрепление файлов к сообщениям.  

* Технические требования
  - Кроссплатформа  
  - Адаптивный дизайн для комплюктеров, смартфонов и планшетов.  

* Серверная часть
  - База данных для хранения обращений и пользовательских данных.  
 API для взаимодействия между клиентом и сервером.  
  - Облачное хранилище (AWS S3 или Yandex.Cloud) для документов.  

* Интерфейс  
  - Пошаговый мастер подачи обращения.  
  - Валидация полей ввода (например, автоматическая проверка формата телефона/email). 

* Требования к безопасности  
   - Шифрование данных (HTTPS, SSL).  
   - Хранение паролей в хешированном виде.  
   - Ролевая модель доступа 
   - Регулярное резервное копирование данных.  
   - Соответствие ФЗ-152 "О персональных данных".

**2.5.  Дополнительно:**

*   **IDE:**  VS Code (backend), Android Studio (frontend)
*	**API:** REST API
